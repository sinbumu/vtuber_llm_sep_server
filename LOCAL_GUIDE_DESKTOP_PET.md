# LOCAL_GUIDE_DESKTOP_PET.md — 데스크톱 펫 모드 가이드 (Windows)

이 문서는 **Open-LLM-VTuber의 데스크톱 펫 모드**를 로컬에서 사용하려는 경우,
**이 백엔드 레포에서 가능한 범위**와 **별도 레포(클라이언트) 참조가 필요한 범위**를 구분해 정리합니다.

---

## 1) 범위 요약

- 이 레포는 **백엔드 서버**와 **프론트 빌드 산출물(`frontend/`)**을 포함합니다.
- README 기준, **데스크톱 클라이언트**가 존재하며 **투명 배경/항상 위 펫 모드**를 지원합니다.
- 단, **데스크톱 클라이언트의 소스/빌드**는 별도 레포(프론트/클라이언트)에서 다룹니다.

즉:
- **웹 UI만으로 “펫 모드 UI”는 가능**하지만,
- **진짜 데스크톱 펫(투명/항상 위 창)은 데스크톱 클라이언트가 필요**합니다.

---

## 2) 웹 UI에서 펫 모드(제한적)

### 가능한 것
- 브라우저에서 UI 모드를 “펫 모드”로 전환
- Live2D 아바타 표시 / 대화 / 마이크 입력 등

### 한계
- 브라우저 창은 **투명 배경/항상 위** 제어가 제한됨
- OS 레벨의 “데스크톱 펫” 체감은 약함

### 절차
1. 백엔드 서버 실행  
   ```powershell
   uv run run_server.py
   ```
2. 브라우저 접속  
   ```
   http://localhost:12393
   ```
3. UI에서 **모드 전환(펫/데스크톱 모드)** 옵션을 선택

> UI 안에서 모드 선택이 보이지 않으면,  
> 프론트엔드 서브모듈이 초기화되지 않았을 수 있습니다.  
> `git submodule update --init --recursive`

---

## 3) 데스크톱 펫 모드(권장, 진짜 OS 창)

데스크톱 펫 모드는 **데스크톱 클라이언트 앱**에서 제공됩니다.  
백엔드만으로는 **투명/항상 위 윈도우를 만들 수 없습니다.**

### 개요
- **백엔드 서버**는 이 레포에서 실행
- **데스크톱 클라이언트**는 별도 프론트/클라이언트 레포에서 실행
- 클라이언트가 백엔드(`http://localhost:12393`)에 연결

### 필요한 것
- 이 레포의 백엔드 서버가 실행 중
- 데스크톱 클라이언트 소스/빌드 환경

### 진행 방법(요약)
1. 이 레포에서 백엔드 실행  
   ```powershell
   uv run run_server.py
   ```
2. 데스크톱 클라이언트 레포(프론트)에서 **빌드/실행**  
   - 레포: `Open-LLM-VTuber-Web`
   - 자세한 빌드 방법은 해당 레포의 README/문서를 따릅니다.
3. 클라이언트에서 **서버 주소를 `http://localhost:12393`로 설정**

> 클라이언트가 별도의 서버 주소 설정 UI를 제공하는 경우가 많습니다.  
> 없다면 프론트 레포의 환경설정(.env 등)에서 API 주소를 바꿔야 합니다.

---

## 4) 운영 체크리스트 (데스크톱 펫 모드 기준)

- 백엔드 서버가 실행 중인지 확인 (`http://localhost:12393`)
- Ollama/LLM/TTS 등 **백엔드 의존 서비스가 정상 동작**하는지 확인
- 마이크 권한/입력 장치 설정 확인
- Live2D 샘플 모델은 **상용 라이선스 주의** (필요 시 교체)

---

## 5) 흔한 문제

### 펫 모드 UI가 안 보임
- `frontend/` 서브모듈 초기화 필요  
  ```powershell
  git submodule update --init --recursive
  ```

### 음성이 안 나옴
- 기본 `edge_tts`는 **지역/네트워크 차단**으로 실패할 수 있음  
  로컬 TTS로 변경 필요 (`pyttsx3_tts`, `piper_tts`, `sherpa_onnx_tts` 등)

---

필요하면 **데스크톱 클라이언트 레포 기준 설치/실행 가이드**까지 별도 문서로 만들어드릴게요.

